import{aA as ie,aB as ae,d as G,aF as ao,cA as so,z as N,a as te,i as We,bo as ko,ap as K,cB as $o,S as F,aN as ce,aL as Pe,az as ee,cC as xo,cD as So,aD as Vo,cE as Co,cF as To,bF as Bo,aC as eo,aI as io,cG as jo,cH as Io,b7 as Uo,aP as Do,cI as Lo,T as Ro,ci as Eo,b2 as zo,cJ as Oo,o as i,b as I,e as r,c as U,w as t,g as T,t as $,f as o,s as He,B as ne,cu as pe,U as oe,V as se,h as s,cK as Mo,cL as g,cM as Ye,a6 as Ce,v as Te,a1 as Be,x as je,a2 as Ie,y as Ue,c4 as de,c5 as ue,cN as uo,cO as ro,bj as me,cP as Ao,c0 as qo,cQ as Po,cR as Fo,cS as Wo,P as we,c1 as Ho,cT as ke,cU as Z,af as j,cV as oo,cW as to,cX as no,b3 as De,ag as Yo,cY as Go,cZ as Jo,bi as co,a3 as ge,O as Xo,bk as Zo,bl as Ko,c_ as $e,c$ as xe,bg as Ge,d0 as Qo,bf as Le,d1 as fe,H as Se,d2 as et,d3 as ot,bh as po,_ as Re,d4 as tt,d5 as nt,d6 as lt,d7 as mo,d8 as fo,d9 as at,da as Fe,db as st,dc as it,dd as vo,de as dt,bw as ut,df as rt,dg as ct,bx as pt}from"./index-BztLELzb.js";import{e as Ee,_ as mt,f as ft,c as vt,d as _t}from"./Grid-DDhjb_3_.js";import{_ as Ne,a as ye}from"./DescriptionsItem-gUlfoQM0.js";import{e as _o,j as ho,o as bo}from"./index-B-_kZKhv.js";function ht(l){return typeof l=="string"?document.querySelector(l):typeof l=="function"?l():l}function bt(l){return l instanceof HTMLElement?l.scrollTop:window.scrollY}function gt(l){return l instanceof HTMLElement?l.getBoundingClientRect():{top:0,bottom:window.innerHeight}}const Nt=ie("affix",[ae("affixed",{position:"fixed"},[ae("absolute-positioned",{position:"absolute"})])]),yt={listenTo:[String,Object,Function],top:Number,bottom:Number,triggerTop:Number,triggerBottom:Number,position:{type:String,default:"fixed"},offsetTop:{type:Number,validator:()=>!0,default:void 0},offsetBottom:{type:Number,validator:()=>!0,default:void 0},target:{type:Function,validator:()=>!0,default:void 0}},wt=G({name:"Affix",props:yt,setup(l){const{mergedClsPrefixRef:k}=ao(l);so("-affix",Nt,k);let f=null;const B=N(!1),a=N(!1),e=N(null),n=N(null),p=te(()=>a.value||B.value),c=te(()=>{var v,x;return(x=(v=l.triggerTop)!==null&&v!==void 0?v:l.offsetTop)!==null&&x!==void 0?x:l.top}),_=te(()=>{var v,x;return(x=(v=l.top)!==null&&v!==void 0?v:l.triggerTop)!==null&&x!==void 0?x:l.offsetTop}),m=te(()=>{var v,x;return(x=(v=l.bottom)!==null&&v!==void 0?v:l.triggerBottom)!==null&&x!==void 0?x:l.offsetBottom}),d=te(()=>{var v,x;return(x=(v=l.triggerBottom)!==null&&v!==void 0?v:l.offsetBottom)!==null&&x!==void 0?x:l.bottom}),b=N(null),y=()=>{const{target:v,listenTo:x}=l;v?f=v():x?f=ht(x):f=document,f&&(f.addEventListener("scroll",V),V())};function V(){$o(D)}function D(){const{value:v}=b;if(!f||!v)return;const x=bt(f);if(p.value){n.value!==null&&x<n.value&&(B.value=!1,n.value=null),e.value!==null&&x>e.value&&(a.value=!1,e.value=null);return}const M=gt(f),L=v.getBoundingClientRect(),O=L.top-M.top,H=M.bottom-L.bottom,h=c.value,C=d.value;h!==void 0&&O<=h?(B.value=!0,n.value=x-(h-O)):(B.value=!1,n.value=null),C!==void 0&&H<=C?(a.value=!0,e.value=x+C-H):(a.value=!1,e.value=null)}return We(()=>{y()}),ko(()=>{f&&f.removeEventListener("scroll",V)}),{selfRef:b,affixed:p,mergedClsPrefix:k,mergedstyle:te(()=>{const v={};return B.value&&c.value!==void 0&&_.value!==void 0&&(v.top=`${_.value}px`),a.value&&d.value!==void 0&&m.value!==void 0&&(v.bottom=`${m.value}px`),v})}},render(){const{mergedClsPrefix:l}=this;return K("div",{ref:"selfRef",class:[`${l}-affix`,{[`${l}-affix--affixed`]:this.affixed,[`${l}-affix--absolute-positioned`]:this.position==="absolute"}],style:this.mergedstyle},this.$slots)}}),lo=G({name:"SlotMachineNumber",props:{clsPrefix:{type:String,required:!0},value:{type:[Number,String],required:!0},oldOriginalNumber:{type:Number,default:void 0},newOriginalNumber:{type:Number,default:void 0}},setup(l){const k=N(null),f=N(l.value),B=N(l.value),a=N("up"),e=N(!1),n=te(()=>e.value?`${l.clsPrefix}-base-slot-machine-current-number--${a.value}-scroll`:null),p=te(()=>e.value?`${l.clsPrefix}-base-slot-machine-old-number--${a.value}-scroll`:null);F(Pe(l,"value"),(m,d)=>{f.value=d,B.value=m,ce(c)});function c(){const m=l.newOriginalNumber,d=l.oldOriginalNumber;d===void 0||m===void 0||(m>d?_("up"):d>m&&_("down"))}function _(m){a.value=m,e.value=!1,ce(()=>{var d;(d=k.value)===null||d===void 0||d.offsetWidth,e.value=!0})}return()=>{const{clsPrefix:m}=l;return K("span",{ref:k,class:`${m}-base-slot-machine-number`},f.value!==null?K("span",{class:[`${m}-base-slot-machine-old-number ${m}-base-slot-machine-old-number--top`,p.value]},f.value):null,K("span",{class:[`${m}-base-slot-machine-current-number`,n.value]},K("span",{ref:"numberWrapper",class:[`${m}-base-slot-machine-current-number__inner`,typeof l.value!="number"&&`${m}-base-slot-machine-current-number__inner--not-number`]},B.value)),f.value!==null?K("span",{class:[`${m}-base-slot-machine-old-number ${m}-base-slot-machine-old-number--bottom`,p.value]},f.value):null)}}}),{cubicBezierEaseOut:be}=xo;function kt({duration:l=".2s"}={}){return[ee("&.fade-up-width-expand-transition-leave-active",{transition:`
 opacity ${l} ${be},
 max-width ${l} ${be},
 transform ${l} ${be}
 `}),ee("&.fade-up-width-expand-transition-enter-active",{transition:`
 opacity ${l} ${be},
 max-width ${l} ${be},
 transform ${l} ${be}
 `}),ee("&.fade-up-width-expand-transition-enter-to",{opacity:1,transform:"translateX(0) translateY(0)"}),ee("&.fade-up-width-expand-transition-enter-from",{maxWidth:"0 !important",opacity:0,transform:"translateY(60%)"}),ee("&.fade-up-width-expand-transition-leave-from",{opacity:1,transform:"translateY(0)"}),ee("&.fade-up-width-expand-transition-leave-to",{maxWidth:"0 !important",opacity:0,transform:"translateY(60%)"})]}const $t=ee([ee("@keyframes n-base-slot-machine-fade-up-in",`
 from {
 transform: translateY(60%);
 opacity: 0;
 }
 to {
 transform: translateY(0);
 opacity: 1;
 }
 `),ee("@keyframes n-base-slot-machine-fade-down-in",`
 from {
 transform: translateY(-60%);
 opacity: 0;
 }
 to {
 transform: translateY(0);
 opacity: 1;
 }
 `),ee("@keyframes n-base-slot-machine-fade-up-out",`
 from {
 transform: translateY(0%);
 opacity: 1;
 }
 to {
 transform: translateY(-60%);
 opacity: 0;
 }
 `),ee("@keyframes n-base-slot-machine-fade-down-out",`
 from {
 transform: translateY(0%);
 opacity: 1;
 }
 to {
 transform: translateY(60%);
 opacity: 0;
 }
 `),ie("base-slot-machine",`
 overflow: hidden;
 white-space: nowrap;
 display: inline-block;
 height: 18px;
 line-height: 18px;
 `,[ie("base-slot-machine-number",`
 display: inline-block;
 position: relative;
 height: 18px;
 width: .6em;
 max-width: .6em;
 `,[kt({duration:".2s"}),So({duration:".2s",delay:"0s"}),ie("base-slot-machine-old-number",`
 display: inline-block;
 opacity: 0;
 position: absolute;
 left: 0;
 right: 0;
 `,[ae("top",{transform:"translateY(-100%)"}),ae("bottom",{transform:"translateY(100%)"}),ae("down-scroll",{animation:"n-base-slot-machine-fade-down-out .2s cubic-bezier(0, 0, .2, 1)",animationIterationCount:1}),ae("up-scroll",{animation:"n-base-slot-machine-fade-up-out .2s cubic-bezier(0, 0, .2, 1)",animationIterationCount:1})]),ie("base-slot-machine-current-number",`
 display: inline-block;
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 right: 0;
 opacity: 1;
 transform: translateY(0);
 width: .6em;
 `,[ae("down-scroll",{animation:"n-base-slot-machine-fade-down-in .2s cubic-bezier(0, 0, .2, 1)",animationIterationCount:1}),ae("up-scroll",{animation:"n-base-slot-machine-fade-up-in .2s cubic-bezier(0, 0, .2, 1)",animationIterationCount:1}),Vo("inner",`
 display: inline-block;
 position: absolute;
 right: 0;
 top: 0;
 width: .6em;
 `,[ae("not-number",`
 right: unset;
 left: 0;
 `)])])])])]),xt=G({name:"BaseSlotMachine",props:{clsPrefix:{type:String,required:!0},value:{type:[Number,String],default:0},max:{type:Number,default:void 0},appeared:{type:Boolean,required:!0}},setup(l){so("-base-slot-machine",$t,Pe(l,"clsPrefix"));const k=N(),f=N(),B=te(()=>{if(typeof l.value=="string")return[];if(l.value<1)return[0];const a=[];let e=l.value;for(l.max!==void 0&&(e=Math.min(l.max,e));e>=1;)a.push(e%10),e/=10,e=Math.floor(e);return a.reverse(),a});return F(Pe(l,"value"),(a,e)=>{typeof a=="string"?(f.value=void 0,k.value=void 0):typeof e=="string"?(f.value=a,k.value=void 0):(f.value=a,k.value=e)}),()=>{const{value:a,clsPrefix:e}=l;return typeof a=="number"?K("span",{class:`${e}-base-slot-machine`},K(To,{name:"fade-up-width-expand-transition",tag:"span"},{default:()=>B.value.map((n,p)=>K(lo,{clsPrefix:e,key:B.value.length-p-1,oldOriginalNumber:k.value,newOriginalNumber:f.value,value:n}))}),K(Co,{key:"+",width:!0},{default:()=>l.max!==void 0&&l.max<a?K(lo,{clsPrefix:e,value:"+"}):null})):K("span",{class:`${e}-base-slot-machine`},a)}}}),St=l=>{const{errorColor:k,infoColor:f,successColor:B,warningColor:a,fontFamily:e}=l;return{color:k,colorInfo:f,colorSuccess:B,colorError:k,colorWarning:a,fontSize:"12px",fontFamily:e}},Vt={name:"Badge",common:Bo,self:St},Ct=ee([ee("@keyframes badge-wave-spread",{from:{boxShadow:"0 0 0.5px 0px var(--n-ripple-color)",opacity:.6},to:{boxShadow:"0 0 0.5px 4.5px var(--n-ripple-color)",opacity:0}}),ie("badge",`
 display: inline-flex;
 position: relative;
 vertical-align: middle;
 font-family: var(--n-font-family);
 `,[ae("as-is",[ie("badge-sup",{position:"static",transform:"translateX(0)"},[eo({transformOrigin:"left bottom",originalTransform:"translateX(0)"})])]),ae("dot",[ie("badge-sup",`
 height: 8px;
 width: 8px;
 padding: 0;
 min-width: 8px;
 left: 100%;
 bottom: calc(100% - 4px);
 `,[ee("::before","border-radius: 4px;")])]),ie("badge-sup",`
 background: var(--n-color);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 color: #FFF;
 position: absolute;
 height: 18px;
 line-height: 18px;
 border-radius: 9px;
 padding: 0 6px;
 text-align: center;
 font-size: var(--n-font-size);
 transform: translateX(-50%);
 left: 100%;
 bottom: calc(100% - 9px);
 font-variant-numeric: tabular-nums;
 z-index: 1;
 display: flex;
 align-items: center;
 `,[eo({transformOrigin:"left bottom",originalTransform:"translateX(-50%)"}),ie("base-wave",{zIndex:1,animationDuration:"2s",animationIterationCount:"infinite",animationDelay:"1s",animationTimingFunction:"var(--n-ripple-bezier)",animationName:"badge-wave-spread"}),ee("&::before",`
 opacity: 0;
 transform: scale(1);
 border-radius: 9px;
 content: "";
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)])])]),Tt=Object.assign(Object.assign({},io.props),{value:[String,Number],max:Number,dot:Boolean,type:{type:String,default:"default"},show:{type:Boolean,default:!0},showZero:Boolean,processing:Boolean,color:String,offset:Array}),ze=G({name:"Badge",props:Tt,setup(l,{slots:k}){const{mergedClsPrefixRef:f,inlineThemeDisabled:B,mergedRtlRef:a}=ao(l),e=io("Badge","-badge",Ct,Vt,l,f),n=N(!1),p=()=>{n.value=!0},c=()=>{n.value=!1},_=te(()=>l.show&&(l.dot||l.value!==void 0&&!(!l.showZero&&Number(l.value)<=0)||!jo(k.value)));We(()=>{_.value&&(n.value=!0)});const m=Io("Badge",a,f),d=te(()=>{const{type:V,color:D}=l,{common:{cubicBezierEaseInOut:v,cubicBezierEaseOut:x},self:{[Uo("color",V)]:M,fontFamily:L,fontSize:O}}=e.value;return{"--n-font-size":O,"--n-font-family":L,"--n-color":D||M,"--n-ripple-color":D||M,"--n-bezier":v,"--n-ripple-bezier":x}}),b=B?Do("badge",te(()=>{let V="";const{type:D,color:v}=l;return D&&(V+=D[0]),v&&(V+=Lo(v)),V}),d,l):void 0,y=te(()=>{const{offset:V}=l;if(!V)return;const[D,v]=V,x=typeof D=="number"?`${D}px`:D,M=typeof v=="number"?`${v}px`:v;return{transform:`translate(calc(${m!=null&&m.value?"50%":"-50%"} + ${x}), ${M})`}});return{rtlEnabled:m,mergedClsPrefix:f,appeared:n,showBadge:_,handleAfterEnter:p,handleAfterLeave:c,cssVars:B?void 0:d,themeClass:b==null?void 0:b.themeClass,onRender:b==null?void 0:b.onRender,offsetStyle:y}},render(){var l;const{mergedClsPrefix:k,onRender:f,themeClass:B,$slots:a}=this;f==null||f();const e=(l=a.default)===null||l===void 0?void 0:l.call(a);return K("div",{class:[`${k}-badge`,this.rtlEnabled&&`${k}-badge--rtl`,B,{[`${k}-badge--dot`]:this.dot,[`${k}-badge--as-is`]:!e}],style:this.cssVars},e,K(Ro,{name:"fade-in-scale-up-transition",onAfterEnter:this.handleAfterEnter,onAfterLeave:this.handleAfterLeave},{default:()=>this.showBadge?K("sup",{class:`${k}-badge-sup`,title:Eo(this.value),style:this.offsetStyle},zo(a.value,()=>[this.dot?null:K(xt,{clsPrefix:k,appeared:this.appeared,max:this.max,value:this.value})]),this.processing?K(Oo,{clsPrefix:k}):null):null}))}}),Bt={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},jt=r("path",{fill:"currentColor",d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8"},null,-1),It=r("path",{fill:"currentColor",d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8Z"},null,-1),Ut=[jt,It];function Dt(l,k){return i(),I("svg",Bt,[...Ut])}const go={name:"ant-design-plus-outlined",render:Dt},Lt={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Rt=r("path",{fill:"currentColor",d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8"},null,-1),Et=[Rt];function zt(l,k){return i(),I("svg",Lt,[...Et])}const Ot={name:"ant-design-minus-outlined",render:zt},Mt={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},At=r("path",{fill:"currentColor",d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1l-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4"},null,-1),qt=[At];function Pt(l,k){return i(),I("svg",Mt,[...qt])}const No={name:"ant-design-right-outlined",render:Pt},Ft={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Wt=r("path",{fill:"currentColor","fill-rule":"evenodd",d:"M799.855 166.312c.023.007.043.018.084.059l57.69 57.69c.041.041.052.06.059.084a.1.1 0 0 1 0 .069c-.007.023-.018.042-.059.083L569.926 512l287.703 287.703c.041.04.052.06.059.083a.12.12 0 0 1 0 .07c-.007.022-.018.042-.059.083l-57.69 57.69c-.041.041-.06.052-.084.059a.1.1 0 0 1-.069 0c-.023-.007-.042-.018-.083-.059L512 569.926L224.297 857.629c-.04.041-.06.052-.083.059a.12.12 0 0 1-.07 0c-.022-.007-.042-.018-.083-.059l-57.69-57.69c-.041-.041-.052-.06-.059-.084a.1.1 0 0 1 0-.069c.007-.023.018-.042.059-.083L454.073 512L166.371 224.297c-.041-.04-.052-.06-.059-.083a.12.12 0 0 1 0-.07c.007-.022.018-.042.059-.083l57.69-57.69c.041-.041.06-.052.084-.059a.1.1 0 0 1 .069 0c.023.007.042.018.083.059L512 454.073l287.703-287.702c.04-.041.06-.052.083-.059a.12.12 0 0 1 .07 0Z"},null,-1),Ht=[Wt];function Yt(l,k){return i(),I("svg",Ft,[...Ht])}const Je={name:"ant-design-close-outlined",render:Yt},Gt={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Jt=r("path",{fill:"currentColor",d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281l360-281.1c3.8-3 6.1-7.7 6.1-12.6"},null,-1),Xt=[Jt];function Zt(l,k){return i(),I("svg",Gt,[...Xt])}const yo={name:"ant-design-left-outlined",render:Zt},Kt={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Qt=r("path",{fill:"currentColor",d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448s448-200.6 448-448S759.4 64 512 64m0 820c-205.4 0-372-166.6-372-372c0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884m288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372c0 89-31.3 170.8-83.5 234.8"},null,-1),en=[Qt];function on(l,k){return i(),I("svg",Kt,[...en])}const tn={name:"ant-design-stop-outlined",render:on},nn={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},ln=r("path",{fill:"currentColor",d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9C912 303 733.5 124.3 512.6 124C291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2c3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1c-8.1-6.6-15.9-13.7-23.4-21.2a318.6 318.6 0 0 1-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7s63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6s52.5 63.6 68.6 101.7c16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.6 318.6 0 0 1-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 0 0-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9z"},null,-1),an=[ln];function sn(l,k){return i(),I("svg",nn,[...an])}const Xe={name:"ant-design-redo-outlined",render:sn},dn={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},un=r("path",{fill:"currentColor",d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 0 0 0-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 0 0 9.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9m67.4-174.4L687.8 215l73.3 73.3l-362.7 362.6l-88.9 15.7zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32"},null,-1),rn=[un];function cn(l,k){return i(),I("svg",dn,[...rn])}const pn={name:"ant-design-edit-outlined",render:cn},mn={class:"flex items-center"},Oe=G({name:"EditableInput",__name:"editable-input",props:{modelValue:{}},emits:["update:modelValue"],setup(l,{emit:k}){const f=l,B=k,a=N(),e=N(),n=N(!1);F(()=>f.modelValue,_=>{e.value=_},{immediate:!0});const p=()=>{n.value=!0,ce(()=>{var _;(_=a.value)==null||_.focus()})},c=()=>{B("update:modelValue",e.value),n.value=!1};return(_,m)=>{const d=He,b=pn,y=ne,V=Ee;return n.value?(i(),U(d,{key:0,ref_key:"inputRef",ref:a,value:e.value,"onUpdate:value":m[0]||(m[0]=D=>e.value=D),type:"text",onBlur:c},null,8,["value"])):(i(),U(V,{key:1},{default:t(()=>[r("span",mn,[T($(e.value)+" ",1),o(y,{text:"",type:"info",class:"m-l-6px",onClick:p},{icon:t(()=>[o(b,{class:"text-icon"})]),_:1})])]),_:1}))}}}),fn={class:"w-460px flex-center"},vn=G({name:"TaskDrawer",__name:"task-drawer",props:{modelValue:{default:()=>({})},open:{type:Boolean,default:!1},len:{default:0}},emits:["update:open","save"],setup(l,{emit:k}){const f=l,B=k,a=pe(),e=N(!1),n=N({}),p=N([]);F(()=>a.jobList,y=>{p.value=y},{immediate:!0,deep:!0}),F(()=>f.open,y=>{e.value=y},{immediate:!0}),F(()=>f.modelValue,y=>{n.value=y},{immediate:!0,deep:!0});const c=N(),_=()=>{B("update:open",!1),e.value=!1},m=()=>{var y;(y=c.value)==null||y.validate(V=>{V||(_(),B("save",n.value))}).catch(()=>{var V;return(V=window.$message)==null?void 0:V.warning("请检查表单信息")})},d={failStrategy:[{required:!0,message:"请选择失败策略"}],workflowNodeStatus:[{required:!0,message:"请选择工作流状态"}],jobTask:{jobId:[{required:!0,message:"请选择任务"}]}},b=(y,V)=>{n.value.jobTask.jobName=V.label};return(y,V)=>{const D=Ce,v=Te,x=Be,M=je,L=Ie,O=Ue,H=ne,h=de,C=ue;return i(),U(C,{show:e.value,"onUpdate:show":V[5]||(V[5]=R=>e.value=R),"display-directive":"if",width:500,onAfterLeave:_},{default:t(()=>[o(h,null,{header:t(()=>[r("div",fn,[o(Oe,{modelValue:n.value.nodeName,"onUpdate:modelValue":V[0]||(V[0]=R=>n.value.nodeName=R),class:"mr-16px max-w-320px min-w-320px"},null,8,["modelValue"]),o(D,{value:n.value.priorityLevel,"onUpdate:value":V[1]||(V[1]=R=>n.value.priorityLevel=R),class:"max-w-110px",options:Array(y.len).fill(0).map((R,P)=>({label:"优先级 "+(P+1),value:P+1}))},null,8,["value","options"])])]),footer:t(()=>[o(H,{type:"primary",onClick:m},{default:t(()=>[T("保存")]),_:1}),o(H,{class:"ml-12px",onClick:_},{default:t(()=>[T("取消")]),_:1})]),default:t(()=>[o(O,{ref_key:"formRef",ref:c,model:n.value,rules:d,"label-align":"left","label-width":"100px"},{default:t(()=>[o(v,{path:"jobTask.jobId",label:"所属任务",placeholder:"请选择任务"},{default:t(()=>[o(D,{value:n.value.jobTask.jobId,"onUpdate:value":[V[2]||(V[2]=R=>n.value.jobTask.jobId=R),b],options:p.value.map(R=>({label:R.jobName,value:R.id}))},null,8,["value","options"])]),_:1}),o(v,{path:"failStrategy",label:"失败策略"},{default:t(()=>[o(L,{value:n.value.failStrategy,"onUpdate:value":V[3]||(V[3]=R=>n.value.failStrategy=R)},{default:t(()=>[o(M,null,{default:t(()=>[(i(!0),I(oe,null,se(s(Mo),(R,P)=>(i(),U(x,{key:P,label:s(g)(R.label),value:R.value},null,8,["label","value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1}),o(v,{path:"workflowNodeStatus",label:"节点状态"},{default:t(()=>[o(L,{value:n.value.workflowNodeStatus,"onUpdate:value":V[4]||(V[4]=R=>n.value.workflowNodeStatus=R)},{default:t(()=>[o(M,null,{default:t(()=>[(i(!0),I(oe,null,se(s(Ye),(R,P)=>(i(),U(x,{key:P,label:s(g)(R.label),value:R.value},null,8,["label","value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])}}}),_n=G({name:"TaskDetail",__name:"task-detail",props:{modelValue:{default:()=>({})},open:{type:Boolean,default:!1}},emits:["update:open"],setup(l,{emit:k}){const f=l,B=k,a=pe(),e=N(!1);F(()=>f.open,c=>{e.value=c},{immediate:!0});const n=()=>{B("update:open",!1)},p=c=>{var m;return(m=a.jobList.find(d=>d.id===c))==null?void 0:m.jobName};return(c,_)=>{const m=Ne,d=ye,b=de,y=ue;return i(),U(y,{show:e.value,"onUpdate:show":_[0]||(_[0]=V=>e.value=V),placement:"right",width:500,"display-directive":"if",onAfterLeave:n},{default:t(()=>[o(b,{title:"工作流详情"},{default:t(()=>[o(d,{column:1,"label-placement":"left",bordered:"","label-style":{width:"120px"}},{default:t(()=>[o(m,{label:"节点名称"},{default:t(()=>[T($(c.modelValue.nodeName),1)]),_:1}),o(m,{label:"任务 ID"},{default:t(()=>{var V;return[T($((V=c.modelValue.jobTask)==null?void 0:V.jobId),1)]}),_:1}),o(m,{label:"任务名称"},{default:t(()=>{var V;return[T($(p((V=c.modelValue.jobTask)==null?void 0:V.jobId)),1)]}),_:1}),o(m,{label:"失败策略"},{default:t(()=>[T($(s(g)(s(uo)[c.modelValue.failStrategy])),1)]),_:1}),o(m,{label:"工作流状态"},{default:t(()=>[T($(s(g)(s(ro)[c.modelValue.workflowNodeStatus])),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),hn={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},bn=r("path",{fill:"currentColor",d:"M168 504.2c1-43.7 10-86.1 26.9-126c17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 0 1 755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 0 0 3 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92C282.7 92 96.3 275.6 92 503.8a8 8 0 0 0 8 8.2h60c4.4 0 7.9-3.5 8-7.8m756 7.8h-60c-4.4 0-7.9 3.5-8 7.8c-1 43.7-10 86.1-26.9 126c-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 0 1 512.1 856a342.24 342.24 0 0 1-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 0 0-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 0 0-8-8.2"},null,-1),gn=[bn];function Nn(l,k){return i(),I("svg",hn,[...gn])}const yn={name:"ant-design-sync-outlined",render:Nn},wn=me(Ao,[["__scopeId","data-v-d1f834af"]]),kn=l=>($e("data-v-94ce09e3"),l=l(),xe(),l),$n=kn(()=>r("div",{class:"header-border"},[r("span",{class:"pl-12px"},"任务项列表")],-1));function xn(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Object]"&&!Yo(l)}const Sn=G({name:"DetailCard",__name:"detail-card",props:{id:{default:void 0},ids:{default:()=>[]},show:{type:Boolean,default:!1}},emits:["update:show"],setup(l,{emit:k}){const f=l,B=k,a=qo(),e=pe(),n=N(!1),p=N(!1),c=N(!1),_=N(!1),m=N(1),d=N({}),b=N([]),y=N({page:1,pageCount:0,pageSize:10,showSizePicker:!0,pageSizes:[10,15,20,25,30],onUpdatePage:async u=>{y.value.page=u;const w=f.ids[m.value-1];v(w),x(w,u)},onUpdatePageSize:async u=>{y.value.pageSize=u;const w=f.ids[m.value-1];v(w),x(w,y.value.page)}});F(()=>f.show,u=>{n.value=u,u&&L()},{immediate:!0});const V=()=>{B("update:show",!1)};async function D(u){c.value=!0;const{data:w,error:z}=await Go(u);z||(d.value=w,c.value=!1)}async function v(u){c.value=!0;const{data:w,error:z}=await Po(u);z||(d.value=w,c.value=!1)}async function x(u,w=1){_.value=!0;const{data:z,error:E}=await Fo({groupName:e.groupName,taskBatchId:u??"0",page:w,pageSize:y.value.pageSize});E||(y.value.pageCount=z.total,b.value=z.data,_.value=!1)}const M=N([]);function L(){M.value=f.ids,ce(()=>{f.ids.length>0?(v(f.ids[0]),x(f.ids[0])):f.id&&(M.value=[d.value.taskBatchId],D(f.id),x(d.value.taskBatchId))})}const O=N({}),H=u=>{O.value=u,p.value=!0},h=async u=>{var z;const{error:w}=await Jo(e.id,u.workflowNodeId);w||(z=window.$message)==null||z.success("执行重试成功")},C=u=>u===4||u===5||u===6,R=N([{key:"index",title:"日志",align:"center",width:64,render:u=>o(ne,{type:"info",text:!0,onClick:()=>H(u)},{default:()=>[o("span",{class:"w-28px ws-break-spaces"},[`查看
日志`])]})},{key:"id",title:g("snail.jobBatch.jobTask.id"),align:"left",minWidth:64},{key:"groupName",title:g("snail.jobBatch.jobTask.groupName"),align:"left",minWidth:120},{key:"taskStatus",title:g("snail.jobBatch.jobTask.taskStatus"),align:"left",minWidth:80,render:u=>{if(u.taskStatus===null)return;const w=g(Wo[u.taskStatus]);return o(we,{type:{1:"info",2:"info",3:"info",4:"error",5:"error",6:"error"}[u.taskStatus]},xn(w)?w:{default:()=>[w]})}},{key:"clientInfo",title:g("snail.jobBatch.jobTask.clientInfo"),align:"left",minWidth:120,render:u=>{var w;if(u.clientInfo){const z=(w=u.clientInfo)==null?void 0:w.split("@"),E=z.length>1?z[1]:"";return o("div",null,[E])}return o("div",null,[u.clientInfo])}},{key:"argsStr",title:g("snail.jobBatch.jobTask.argsStr"),align:"left",minWidth:120},{key:"resultMessage",title:g("snail.jobBatch.jobTask.resultMessage"),align:"left",minWidth:120},{key:"retryCount",title:g("snail.jobBatch.jobTask.retryCount"),align:"left",minWidth:64},{key:"createDt",title:g("snail.jobBatch.jobTask.createDt"),align:"left",minWidth:120}]);function P(u){return{color:`${u}18`,textColor:u,borderColor:`${u}58`}}const Q=u=>{m.value=u;const w=f.ids[u-1];v(w),x(w,u)};return(u,w)=>{const z=Ne,E=ye,X=co,q=yn,S=ge,Y=Xe,re=mt,_e=Xo,Ve=Zo,Me=Ko,Ae=ft,qe=de,A=ue;return i(),I(oe,null,[o(A,{show:n.value,"onUpdate:show":[w[3]||(w[3]=W=>n.value=W),V],width:800,"display-directive":"if"},{default:t(()=>[o(qe,{title:"任务批次详情",closable:""},Ho({default:t(()=>[M.value&&M.value.length>0?(i(),U(Me,{key:0,value:m.value,"onUpdate:value":w[1]||(w[1]=W=>m.value=W),type:"segment",animated:""},{default:t(()=>[(i(!0),I(oe,null,se(M.value,(W,le)=>(i(),U(Ve,{key:le,name:le+1,tab:W},{default:t(()=>[o(X,{show:c.value},{default:t(()=>[o(E,{"label-placement":"left",bordered:"",column:2},{default:t(()=>[o(z,{label:s(g)("snail.jobBatch.groupName")},{default:t(()=>{var J;return[T($((J=d.value)==null?void 0:J.groupName),1)]}),_:1},8,["label"]),o(z,{label:s(g)("snail.jobBatch.jobName")},{default:t(()=>{var J;return[T($((J=d.value)==null?void 0:J.jobName),1)]}),_:1},8,["label"]),o(z,{label:s(g)("snail.jobBatch.taskBatchStatus")},{default:t(()=>[s(ke)(d.value.taskBatchStatus)?(i(),U(s(we),{key:0,color:P(s(Z)[d.value.taskBatchStatus].color)},{default:t(()=>[T($(s(Z)[d.value.taskBatchStatus].title),1)]),_:1},8,["color"])):j("",!0),s(ke)(d.value.jobStatus)?(i(),U(s(we),{key:1,color:P(s(oo)[d.value.jobStatus].color)},{default:t(()=>[T($(s(g)(s(oo)[d.value.jobStatus].name)),1)]),_:1},8,["color"])):j("",!0)]),_:1},8,["label"]),o(z,{label:s(g)("snail.jobBatch.executionAt")},{default:t(()=>{var J;return[T($((J=d.value)==null?void 0:J.executionAt),1)]}),_:1},8,["label"]),o(z,{label:s(g)("snail.jobBatch.operationReason")},{default:t(()=>[s(ke)(d.value.operationReason)?(i(),U(s(we),{key:0,color:P(s(to)[d.value.operationReason].color)},{default:t(()=>[T($(s(g)(s(to)[d.value.operationReason].name)),1)]),_:1},8,["color"])):j("",!0)]),_:1},8,["label"]),s(a).default?j("",!0):(i(),U(z,{key:0,label:s(g)("snail.jobBatch.executorType")},{default:t(()=>[s(ke)(d.value.executorType)?(i(),U(s(we),{key:0,color:P(s(no)[d.value.executorType].color)},{default:t(()=>[T($(s(g)(s(no)[d.value.executorType].name)),1)]),_:1},8,["color"])):j("",!0)]),_:1},8,["label"])),o(z,{label:s(g)("snail.jobBatch.executorInfo"),span:2},{default:t(()=>{var J;return[T($((J=d.value)==null?void 0:J.executorInfo),1)]}),_:1},8,["label"]),o(z,{label:s(g)("snail.jobBatch.createDt"),span:2},{default:t(()=>{var J;return[T($((J=d.value)==null?void 0:J.createDt),1)]}),_:1},8,["label"])]),_:1})]),_:1},8,["show"]),De(u.$slots,"default",{},void 0,!0),o(_e,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper","content-style":{padding:0},"header-style":{padding:0}},{header:t(()=>[$n]),"header-extra":t(()=>[o(S,{trigger:"hover"},{trigger:t(()=>[o(s(ne),{text:"",onClick:J=>x(W)},{default:t(()=>[o(q,{class:"mr-16px text-20px font-bold"})]),_:2},1032,["onClick"])]),default:t(()=>[T(" 刷新 ")]),_:2},1024),C(d.value.taskBatchStatus)?(i(),U(S,{key:0,trigger:"hover"},{trigger:t(()=>[o(s(ne),{text:""},{default:t(()=>[o(Y,{class:"text-20px font-bold",onClick:w[0]||(w[0]=J=>h(d.value))})]),_:1})]),default:t(()=>[T(" 重试 ")]),_:1})):j("",!0)]),default:t(()=>[o(re,{columns:R.value,data:b.value,loading:_.value,scroll:{x:1200},remote:"","row-key":J=>J.id,pagination:y.value,class:"sm:h-full"},null,8,["columns","data","loading","row-key","pagination"])]),_:2},1024)]),_:2},1032,["name","tab"]))),128))]),_:3},8,["value"])):j("",!0)]),_:2},[u.ids&&u.ids.length>1?{name:"footer",fn:t(()=>[o(Ae,{page:m.value,"onUpdate:page":[w[2]||(w[2]=W=>m.value=W),Q],class:"text-center","page-size":1,"page-count":u.ids.length},null,8,["page","page-count"])]),key:"0"}:void 0]),1024)]),_:3},8,["show"]),o(wn,{show:p.value,"onUpdate:show":w[4]||(w[4]=W=>p.value=W),title:"日志详情","task-data":O.value},null,8,["show","task-data"])],64)}}}),Ze=me(Sn,[["__scopeId","data-v-94ce09e3"]]),Vn={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Cn=r("path",{fill:"currentColor",d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8M872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8"},null,-1),Tn=[Cn];function Bn(l,k){return i(),I("svg",Vn,[...Tn])}const jn={name:"ant-design-swap-outlined",render:Bn},In={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Un=r("path",{fill:"currentColor",d:"M752 664c-28.5 0-54.8 10-75.4 26.7L469.4 540.8a160.7 160.7 0 0 0 0-57.6l207.2-149.9C697.2 350 723.5 360 752 360c66.2 0 120-53.8 120-120s-53.8-120-120-120s-120 53.8-120 120c0 11.6 1.6 22.7 4.7 33.3L439.9 415.8C410.7 377.1 364.3 352 312 352c-88.4 0-160 71.6-160 160s71.6 160 160 160c52.3 0 98.7-25.1 127.9-63.8l196.8 142.5c-3.1 10.6-4.7 21.8-4.7 33.3c0 66.2 53.8 120 120 120s120-53.8 120-120s-53.8-120-120-120m0-476c28.7 0 52 23.3 52 52s-23.3 52-52 52s-52-23.3-52-52s23.3-52 52-52M312 600c-48.5 0-88-39.5-88-88s39.5-88 88-88s88 39.5 88 88s-39.5 88-88 88m440 236c-28.7 0-52-23.3-52-52s23.3-52 52-52s52 23.3 52 52s-23.3 52-52 52"},null,-1),Dn=[Un];function Ln(l,k){return i(),I("svg",In,[...Dn])}const Rn={name:"ant-design-share-alt-outlined",render:Ln},En={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},zn=r("path",{fill:"currentColor",d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8m0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8m0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8M104 228a56 56 0 1 0 112 0a56 56 0 1 0-112 0m0 284a56 56 0 1 0 112 0a56 56 0 1 0-112 0m0 284a56 56 0 1 0 112 0a56 56 0 1 0-112 0"},null,-1),On=[zn];function Mn(l,k){return i(),I("svg",En,[...On])}const An={name:"ant-design-unordered-list-outlined",render:Mn},qn={class:"add-node-btn-box"},Pn={class:"add-node-btn"},Fn={class:"add-node-popover-body"},Wn={class:"icon"},Hn=G({name:"AddNode",__name:"add-node",props:{modelValue:{},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:k}){const f=l,B=k,a=e=>{let n={};e===1?n={nodeName:g("node.task.nodeName"),nodeType:1,conditionNodes:[{nodeName:g("node.task.conditionNodes.nodeName"),failStrategy:1,priorityLevel:1,workflowNodeStatus:1,jobTask:{jobId:void 0}}],childNode:f.modelValue}:e===2?n={nodeName:g("node.condition.nodeName"),nodeType:2,conditionNodes:[{nodeName:`${g("node.condition.conditionNodes.nodeName")} 1`,priorityLevel:1,decision:{expressionType:1,nodeExpression:void 0,logicalCondition:1,defaultDecision:0}},{nodeName:g("node.condition.conditionNodes.otherNodeName"),priorityLevel:2,decision:{expressionType:1,nodeExpression:"#true",logicalCondition:1,defaultDecision:1}}],childNode:f.modelValue}:e===3&&(n={nodeName:g("node.callback.nodeName"),nodeType:3,conditionNodes:[{nodeName:g("node.callback.conditionNodes.nodeName"),workflowNodeStatus:1,callback:{webhook:void 0,contentType:void 0,secret:void 0}}],childNode:f.modelValue}),B("update:modelValue",n)};return(e,n)=>{const p=go,c=ne,_=An,m=Rn,d=jn,b=Ge;return i(),I("div",qn,[r("div",Pn,[e.disabled?j("",!0):(i(),U(b,{key:0,placement:"right-end",trigger:"click","overlay-style":{width:"296px"}},{trigger:t(()=>[o(c,{type:"primary",circle:"",strong:""},{default:t(()=>[o(p)]),_:1})]),default:t(()=>[r("div",Fn,[r("ul",Wn,[r("li",null,[o(c,{circle:"",size:"large",onClick:n[0]||(n[0]=y=>a(1))},{default:t(()=>[o(_,{class:"text-20px color-#3296fa"})]),_:1}),r("p",null,$(s(g)("node.task.nodeName")),1)]),r("li",null,[o(c,{circle:"",size:"large",onClick:n[1]||(n[1]=y=>a(2))},{default:t(()=>[o(m,{class:"text-20px color-#15bc83"})]),_:1}),r("p",null,$(s(g)("node.condition.nodeName")),1)]),r("li",null,[o(c,{circle:"",size:"large",onClick:n[2]||(n[2]=y=>a(3))},{default:t(()=>[o(d,{class:"text-20px color-#935af6"})]),_:1}),r("p",null,$(s(g)("node.callback.nodeName")),1)])])])]),_:1}))])])}}}),ve=me(Hn,[["__scopeId","data-v-01c7123e"]]),Yn=l=>($e("data-v-a8507aad"),l=l(),xe(),l),Gn={class:"node-wrap"},Jn={class:"branch-box"},Xn={class:"condition-node"},Zn={class:"condition-node-box"},Kn={class:"popover"},Qn={class:"popover-item"},el=["onClick"],ol=["onClick"],tl={class:"title"},nl={class:"text color-#3296fa"},ll={class:"priority-title"},al={class:"content min-h-72px"},sl={key:0,class:"placeholder"},il={class:"content_label"},dl={class:"content_label"},ul=Yn(()=>r("div",null,".........",-1)),rl=["onClick"],cl={key:1,class:"top-left-cover-line"},pl={key:2,class:"bottom-left-cover-line"},ml={key:3,class:"top-right-cover-line"},fl={key:4,class:"bottom-right-cover-line"},vl=G({name:"TaskNode",__name:"task-node",props:{modelValue:{default:()=>({})},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:k}){const f=l,B=k,a=pe(),e=Qo(),n=N({});F(()=>f.modelValue,u=>{n.value=u},{immediate:!0,deep:!0});const p=()=>{var w;const u=n.value.conditionNodes.length+1;(w=n.value.conditionNodes)==null||w.push({nodeName:`${g("node.task.name")} ${u}`,priorityLevel:u,failStrategy:1,workflowNodeStatus:1,jobTask:{jobId:void 0}}),B("update:modelValue",n.value)},c=(u,w)=>{u.childNode?c(u.childNode,w):u.childNode=w},_=u=>{var w;n.value.conditionNodes.length===1?(n.value.childNode&&(n.value.conditionNodes[0].childNode?c(n.value.conditionNodes[0].childNode,n.value.childNode):n.value.conditionNodes[0].childNode=n.value.childNode),ce(()=>{B("update:modelValue",n.value.conditionNodes[0].childNode)})):(w=n.value.conditionNodes)==null||w.splice(u,1)},m=(u,w=1)=>{var z;n.value.conditionNodes[u]=n.value.conditionNodes.splice(u+w,1,n.value.conditionNodes[u])[0],(z=n.value.conditionNodes)==null||z.map((E,X)=>E.priorityLevel=X+1),B("update:modelValue",n.value)},d=N(0),b=N(!1),y=N({}),V=u=>{const w=n.value.conditionNodes[d.value].priorityLevel,z=u.priorityLevel;n.value.conditionNodes[d.value]=u,w!==z&&m(d.value,z-w),B("update:modelValue",n.value)},D=u=>{f.disabled||(d.value=u,y.value=JSON.parse(JSON.stringify(n.value.conditionNodes[u])),b.value=!0)},v=u=>f.disabled?a.type===2?`node-error node-error-${u.taskBatchStatus&&Z[u.taskBatchStatus]?Z[u.taskBatchStatus].name:"default"}`:"node-error":"auto-judge-def auto-judge-hover",x=N(),M=N(),L=N(!1),O=N([]),H=(u,w)=>{var z,E,X;M.value=[],a.type===2?((z=u.jobBatchList)==null||z.sort((q,S)=>q.taskBatchStatus-S.taskBatchStatus).forEach(q=>{var S;q.id?(S=M.value)==null||S.push(q.id):q.jobId&&(x.value=q.jobId.toString())}),(E=u.jobTask)!=null&&E.jobId&&(x.value=(X=u.jobTask)==null?void 0:X.jobId.toString()),L.value=!0):a.type===1?O.value[w]=!0:D(w)},h=async u=>{const{error:w}=await et(u.id,a.id);w||e.success(g("snail.form.executeMessage"))},C=async u=>{const{error:w}=await ot(u.id,a.id);w||e.success(g("snail.form.stopMessage"))},R=u=>u===4||u===5||u===6,P=u=>u===1||u===2,Q=u=>R(u)||P(u);return(u,w)=>{const z=ne,E=Xe,X=po,q=tn,S=yo,Y=ze,re=Je,_e=Ee,Ve=No,Me=Ge,Ae=Re,qe=ge;return i(),I("div",Gn,[r("div",Jn,[u.disabled?j("",!0):(i(),U(z,{key:0,class:"add-branch",strong:"",type:"success",onClick:p},{default:t(()=>[T($(s(g)("node.task.add")),1)]),_:1})),(i(!0),I(oe,null,se(n.value.conditionNodes,(A,W)=>(i(),I("div",{key:W,class:"col-box"},[r("div",Xn,[r("div",Zn,[o(Me,{disabled:s(a).type!==2||!Q(A.taskBatchStatus)},{trigger:t(()=>{var le,J;return[r("div",{class:Le(["auto-judge cursor-pointer",v(A)]),onClick:he=>H(A,W)},[W!=0?(i(),I("div",{key:0,class:"sort-left",onClick:fe(he=>m(W,-1),["stop"])},[o(S)],8,ol)):j("",!0),r("div",tl,[r("span",nl,[o(Y,{processing:"",dot:"",color:A.workflowNodeStatus===1?"#52c41a":"#ff4d4f"},null,8,["color"]),T("  "+$(A.nodeName),1)]),r("span",ll,$(s(g)("node.priority"))+$(A.priorityLevel),1),u.disabled?j("",!0):(i(),U(re,{key:0,class:"close",onClick:fe(he=>_(W),["stop"])},null,8,["onClick"]))]),r("div",al,[(le=A.jobTask)!=null&&le.jobId?j("",!0):(i(),I("div",sl,$(s(g)("snail.form.taskTip")),1)),(J=A.jobTask)!=null&&J.jobId?(i(),I(oe,{key:1},[r("div",null,[r("span",il,$(s(g)("snail.taskName"))+": ",1),o(_e,{class:"max-w-123px"},{default:t(()=>{var he,Qe;return[T($(`${(he=A.jobTask)==null?void 0:he.jobName}(${(Qe=A.jobTask)==null?void 0:Qe.jobId})`),1)]}),_:2},1024)]),r("div",null,[r("span",dl,$(s(g)("snail.failStrategy"))+": ",1),T(" "+$(s(g)(s(uo)[A.failStrategy])),1)]),ul],64)):j("",!0)]),W!=n.value.conditionNodes.length-1?(i(),I("div",{key:1,class:"sort-right",onClick:fe(he=>m(W),["stop"])},[o(Ve)],8,rl)):j("",!0)],10,el)]}),default:t(()=>[r("div",Kn,[R(A.taskBatchStatus)?(i(),U(z,{key:0,text:"",onClick:le=>h(A)},{default:t(()=>[r("span",Qn,[o(E,{class:"mb-3px text-24px font-bold"}),T(" "+$(s(g)("snail.retry")),1)])]),_:2},1032,["onClick"])):j("",!0),P(A.taskBatchStatus)&&R(A.taskBatchStatus)?(i(),U(X,{key:1,vertical:""})):j("",!0),P(A.taskBatchStatus)?(i(),U(z,{key:2,text:"",class:"popover-item",onClick:le=>C(A)},{default:t(()=>[o(q),r("span",null,$(s(g)("snail.stop")),1)]),_:2},1032,["onClick"])):j("",!0)])]),_:2},1032,["disabled"]),s(a).type===2&&A.taskBatchStatus?(i(),U(qe,{key:0},{trigger:t(()=>[r("div",{class:"task-error-tip text-24px",style:Se({color:s(Z)[A.taskBatchStatus].color})},[o(Ae,{icon:s(Z)[A.taskBatchStatus].icon},null,8,["icon"])],4)]),default:t(()=>[T(" "+$(s(Z)[A.taskBatchStatus].title),1)]),_:2},1024)):j("",!0),o(ve,{modelValue:A.childNode,"onUpdate:modelValue":le=>A.childNode=le,disabled:u.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])])]),A.childNode?De(u.$slots,"default",{key:0,node:A},void 0,!0):j("",!0),W==0?(i(),I("div",cl)):j("",!0),W==0?(i(),I("div",pl)):j("",!0),W==n.value.conditionNodes.length-1?(i(),I("div",ml)):j("",!0),W==n.value.conditionNodes.length-1?(i(),I("div",fl)):j("",!0),s(a).type!==0?(i(),U(_n,{key:5,open:O.value[W],"onUpdate:open":le=>O.value[W]=le,"model-value":n.value.conditionNodes[W]},null,8,["open","onUpdate:open","model-value"])):j("",!0)]))),128))]),n.value.conditionNodes.length>1?(i(),U(ve,{key:0,modelValue:n.value.childNode,"onUpdate:modelValue":w[0]||(w[0]=A=>n.value.childNode=A),disabled:u.disabled},null,8,["modelValue","disabled"])):j("",!0),s(a).type===0?(i(),U(vn,{key:1,open:b.value,"onUpdate:open":w[1]||(w[1]=A=>b.value=A),modelValue:y.value,"onUpdate:modelValue":w[2]||(w[2]=A=>y.value=A),len:n.value.conditionNodes.length,"onUpdate:len":w[3]||(w[3]=A=>n.value.conditionNodes.length=A),onSave:V},null,8,["open","modelValue","len"])):j("",!0),s(a).type!==0?(i(),U(Ze,{key:2,id:x.value,show:L.value,"onUpdate:show":w[4]||(w[4]=A=>L.value=A),ids:M.value},null,8,["id","show","ids"])):j("",!0)])}}}),_l=me(vl,[["__scopeId","data-v-a8507aad"]]),hl={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},bl=r("path",{fill:"currentColor",d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448s448-200.6 448-448S759.4 64 512 64m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372s372 166.6 372 372s-166.6 372-372 372"},null,-1),gl=r("path",{fill:"currentColor",d:"M464 336a48 48 0 1 0 96 0a48 48 0 1 0-96 0m72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8"},null,-1),Nl=[bl,gl];function yl(l,k){return i(),I("svg",hl,[...Nl])}const wl={name:"ant-design-info-circle-outlined",render:yl},kl={class:"w-460px flex-center"},$l=G({name:"BranchDrawer",__name:"branch-drawer",props:{open:{type:Boolean,default:!1},len:{default:0},modelValue:{default:()=>({})}},emits:["update:open","save"],setup(l,{emit:k}){const f=l,B=k,a=N(!1),e=N({decision:{logicalCondition:1,expressionType:1}}),n=N({".cm-line":{fontSize:"18px"},".cm-scroller":{height:"500px",overflowY:"auto",overflowX:"hidden"}});F(()=>f.open,b=>{a.value=b},{immediate:!0}),F(()=>f.modelValue,b=>{e.value=b},{immediate:!0,deep:!0});const p=N(),c=()=>{B("update:open",!1),a.value=!1},_=()=>{var b;(b=p.value)==null||b.validate(y=>{y||(c(),B("save",e.value))}).catch(()=>{var y;return(y=window.$message)==null?void 0:y.warning("请检查表单信息")})},d={decision:{logicalCondition:[{required:!0,message:"请选择判定逻辑",trigger:"change",type:"number"}],expressionType:[{required:!0,message:"请选择表达式类型",trigger:"change",type:"number"}],nodeExpression:[{required:!0,validator:async()=>{var V;if(!((V=e.value.decision)!=null&&V.nodeExpression))return Promise.reject(new Error("请填写条件表达式"));const{error:b,data:y}=await lt(e.value.decision);return!b&&y.key!==1?Promise.reject(y.value??"请检查条件表达式"):Promise.resolve()},trigger:"blur"}]}};return(b,y)=>{const V=Ce,D=Be,v=je,x=Ie,M=Te,L=Ue,O=ne,H=de,h=ue;return i(),U(h,{show:a.value,"onUpdate:show":y[5]||(y[5]=C=>a.value=C),"display-directive":"if",width:500,onAfterLeave:c},{default:t(()=>[o(H,null,{header:t(()=>[r("div",kl,[o(Oe,{modelValue:e.value.nodeName,"onUpdate:modelValue":y[0]||(y[0]=C=>e.value.nodeName=C),class:"mr-16px max-w-320px min-w-320px"},null,8,["modelValue"]),o(V,{value:e.value.priorityLevel,"onUpdate:value":y[1]||(y[1]=C=>e.value.priorityLevel=C),class:"max-w-110px",options:Array(b.len).fill(0).map((C,R)=>({label:"优先级 "+(R+1),value:R+1}))},null,8,["value","options"])])]),footer:t(()=>[o(O,{type:"primary",onClick:_},{default:t(()=>[T("保存")]),_:1}),o(O,{class:"ml-12px",onClick:c},{default:t(()=>[T("取消")]),_:1})]),default:t(()=>[o(L,{ref_key:"formRef",ref:p,rules:d,model:e.value,"label-align":"left","label-width":"100px"},{default:t(()=>[o(M,{path:"decision.logicalCondition",label:"判定逻辑"},{default:t(()=>[o(x,{value:e.value.decision.logicalCondition,"onUpdate:value":y[2]||(y[2]=C=>e.value.decision.logicalCondition=C)},{default:t(()=>[o(v,null,{default:t(()=>[(i(!0),I(oe,null,se(s(tt),C=>(i(),U(D,{key:C.value,label:C.label,value:C.value},null,8,["label","value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1}),o(M,{path:"decision.expressionType",label:"表达式类型"},{default:t(()=>[o(x,{value:e.value.decision.expressionType,"onUpdate:value":y[3]||(y[3]=C=>e.value.decision.expressionType=C)},{default:t(()=>[o(v,null,{default:t(()=>[(i(!0),I(oe,null,se(s(nt),C=>(i(),U(D,{key:C.value,label:C.label,value:C.value},null,8,["label","value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1}),o(M,{path:"decision.nodeExpression",label:"条件表达式"},{default:t(()=>[o(s(_o),{modelValue:e.value.decision.nodeExpression,"onUpdate:modelValue":y[4]||(y[4]=C=>e.value.decision.nodeExpression=C),class:"sj-code-mirror",theme:n.value,basic:"",lang:s(ho)(),extensions:[s(bo)]},null,8,["modelValue","theme","lang","extensions"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])}}}),xl=me($l,[["__scopeId","data-v-f1c12d6f"]]),wo=G({name:"BranchDesc",__name:"branch-desc",props:{modelValue:{default:()=>({})}},setup(l){const k=l,f=N(""),B=N({".cm-line":{fontSize:"18px"},".cm-scroller":{height:"520px",overflowY:"auto",overflowX:"hidden"}}),a=()=>{var y;const e=document.getElementById("branch-desc"),n=e==null?void 0:e.querySelector(".n-descriptions-table"),p=n==null?void 0:n.querySelector("tbody"),c=document.createElement("tr");c.className="n-descriptions-table-row";const _=document.createElement("th");_.className="n-descriptions-table-header",_.innerHTML="条件表达式",_.setAttribute("colspan","4"),c.appendChild(_),p==null||p.insertBefore(c,p==null?void 0:p.childNodes[4]);const d=p.getElementsByClassName("n-descriptions-table-row")[3];(y=d.querySelector(".n-descriptions-table-header"))==null||y.remove();const b=d.querySelector(".n-descriptions-table-content");b.setAttribute("style","padding: 0"),b==null||b.setAttribute("colspan","4")};return We(()=>{var e;ce(()=>{a()}),(e=k.modelValue.decision)!=null&&e.nodeExpression&&(f.value=k.modelValue.decision.nodeExpression)}),(e,n)=>{const p=Ne,c=ye;return i(),U(c,{id:"branch-desc",column:2,"label-placement":"left",bordered:"","label-style":{width:"120px"}},{default:t(()=>[o(p,{label:"节点名称",span:2},{default:t(()=>[T($(e.modelValue.nodeName),1)]),_:1}),o(p,{label:"判定逻辑"},{default:t(()=>{var _;return[T($(s(mo)[(_=e.modelValue.decision)==null?void 0:_.logicalCondition]),1)]}),_:1}),o(p,{label:"表达式类型"},{default:t(()=>{var _;return[T($(s(fo)[(_=e.modelValue.decision)==null?void 0:_.expressionType]),1)]}),_:1}),o(p,{label:"条件表达式",span:2,"content-style":{padding:0}},{default:t(()=>[o(s(_o),{modelValue:f.value,"onUpdate:modelValue":n[0]||(n[0]=_=>f.value=_),readonly:"",disabled:"",theme:B.value,basic:"",lang:s(ho)(),extensions:[s(bo)]},null,8,["modelValue","theme","lang","extensions"])]),_:1})]),_:1})}}}),Sl=G({name:"BranchDetail",__name:"branch-detail",props:{modelValue:{default:()=>({})},open:{type:Boolean,default:!1}},emits:["update:open"],setup(l,{emit:k}){const f=l,B=k,a=N(!1),e=()=>{B("update:open",!1)};return F(()=>f.open,n=>{a.value=n},{immediate:!0}),(n,p)=>{const c=de,_=ue;return i(),U(_,{show:a.value,"onUpdate:show":p[0]||(p[0]=m=>a.value=m),placement:"right",width:500,"display-directive":"if",onAfterLeave:e},{default:t(()=>[o(c,{title:"决策详情"},{default:t(()=>[a.value?(i(),U(wo,{key:0,"model-value":n.modelValue},null,8,["model-value"])):j("",!0)]),_:1})]),_:1},8,["show"])}}}),Vl=l=>($e("data-v-bf759585"),l=l(),xe(),l),Cl={class:"branch-wrap"},Tl={class:"branch-box-wrap"},Bl={class:"branch-box"},jl={class:"condition-node"},Il={class:"condition-node-box"},Ul=["onClick"],Dl=["onClick"],Ll={class:"title"},Rl={class:"node-title"},El={class:"priority-title"},zl={class:"content"},Ol=["innerHTML"],Ml={key:1,class:"placeholder"},Al=["onClick"],ql={key:1,class:"top-left-cover-line"},Pl={key:2,class:"bottom-left-cover-line"},Fl={key:3,class:"top-right-cover-line"},Wl={key:4,class:"bottom-right-cover-line"},Hl=Vl(()=>r("div",{class:"header-border"},[r("span",{class:"pl-12px"},"决策节点详情")],-1)),Yl=G({name:"BranchNode",__name:"branch-node",props:{modelValue:{default:()=>({})},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:k}){const f=l,B=k,a=pe(),e=N({});F(()=>f.modelValue,h=>{e.value=h},{immediate:!0,deep:!0});const n=()=>{const h=e.value.conditionNodes.length;e.value.conditionNodes.splice(-1,0,{nodeName:`${g("node.condition.nodeName")} ${h}`,priorityLevel:h,decision:{expressionType:1,nodeExpression:void 0,logicalCondition:1,defaultDecision:0}}),e.value.conditionNodes[h].priorityLevel=h+1},p=(h,C)=>{h.childNode?p(h.childNode,C):h.childNode=C},c=h=>{var C;(C=e.value.conditionNodes)==null||C.splice(h,1),e.value.conditionNodes.length===1&&(e.value.childNode&&(e.value.conditionNodes[0].childNode?p(e.value.conditionNodes[0].childNode,e.value.childNode):e.value.conditionNodes[0].childNode=e.value.childNode),ce(()=>{B("update:modelValue",e.value.conditionNodes[0].childNode)}))},_=(h,C=1)=>{var R;e.value.conditionNodes[h]=e.value.conditionNodes.splice(h+C,1,e.value.conditionNodes[h])[0],(R=e.value.conditionNodes)==null||R.map((P,Q)=>P.priorityLevel=Q+1),B("update:modelValue",e.value)},m=(h,C)=>{const{nodeName:R,decision:P}=h.conditionNodes[C],{logicalCondition:Q,expressionType:u,nodeExpression:w}=P;return w?R!==g("node.condition.conditionNodes.otherNodeName")?`<span class="content_label">${g("node.condition.conditionNodes.logicalCondition")}: </span>${mo[Q]}
<span class="content_label">${g("node.condition.conditionNodes.expressionType")}: </span>${fo[u]}
<span class="content_label">${g("node.condition.conditionNodes.nodeExpression")}: </span><span style="display: inline-block; vertical-align: bottom; width: 120px; overflow: hidden; text-overflow: ellipsis">${w}<span/>`:g("node.condition.conditionNodes.otherNodeTip"):R===g("node.condition.conditionNodes.otherNodeName")?g("node.condition.conditionNodes.otherNodeTip"):null},d=N(0),b=N(!1),y=N([]),V=N({}),D=h=>{const C=e.value.conditionNodes[d.value].priorityLevel,R=h.priorityLevel;e.value.conditionNodes[d.value]=h,C!==R&&_(d.value,R-C),B("update:modelValue",e.value)},v=h=>{!f.disabled&&h!==e.value.conditionNodes.length-1?(d.value=h,V.value=JSON.parse(JSON.stringify(e.value.conditionNodes[h])),b.value=!0):a.type!==0&&(y.value[h]=!0)},x=N([]),M=N(""),L=N([]),O=(h,C)=>{var R;if(L.value=[],h.nodeName!==g("node.condition.conditionNodes.otherNodeName"))if(a.type===2){if((R=h.jobBatchList)==null||R.forEach(P=>{var Q;P.id?(Q=L.value)==null||Q.push(P.id):P.jobId&&(M.value=P.jobId.toString())}),L.value.length===0){y.value[C]=!0;return}x.value[C]=!0}else a.type===1?y.value[C]=!0:v(C)},H=h=>f.disabled?a.type===2?h.nodeName===g("node.condition.conditionNodes.otherNodeName")?`node-disabled node-error node-error-${h.taskBatchStatus?Z[h.taskBatchStatus].name:"default"}`:`node-error node-error-${h.taskBatchStatus?Z[h.taskBatchStatus].name:"default"}`:h.nodeName===g("node.condition.conditionNodes.otherNodeName")?"node-disabled":"node-error":h.nodeName===g("node.condition.conditionNodes.otherNodeName")?"node-disabled":"auto-judge-def auto-judge-hover";return(h,C)=>{const R=ne,P=yo,Q=ze,u=wl,w=ge,z=Je,E=No,X=Re;return i(),I("div",Cl,[r("div",Tl,[r("div",Bl,[h.disabled?j("",!0):(i(),U(R,{key:0,strong:"",type:"success",class:"add-branch",onClick:n},{default:t(()=>[T($(s(g)("node.condition.addBranch")),1)]),_:1})),(i(!0),I(oe,null,se(e.value.conditionNodes,(q,S)=>(i(),I("div",{key:S,class:"col-box"},[r("div",jl,[r("div",Il,[r("div",{class:Le(["auto-judge",H(q)]),onClick:Y=>O(q,S)},[S!==0?(i(),I("div",{key:0,class:"sort-left",onClick:fe(Y=>_(S,-1),["stop"])},[o(P)],8,Dl)):j("",!0),r("div",Ll,[r("span",Rl,[o(Q,{dot:"",processing:"",color:"#52c41a"}),T("  "+$(q.nodeName)+" ",1),q.nodeName===s(g)("node.condition.conditionNodes.otherNodeName")?(i(),U(w,{key:0},{trigger:t(()=>[o(u,{class:"ml-3px text-16px"})]),default:t(()=>[T(" "+$(s(g)("node.condition.conditionNodes.otherTip")),1)]),_:1})):j("",!0)]),r("span",El,$(s(g)("node.condition.conditionNodes.priority"))+$(q.priorityLevel),1),h.disabled?j("",!0):(i(),U(z,{key:0,class:"close",onClick:fe(Y=>c(S),["stop"])},null,8,["onClick"]))]),r("div",zl,[m(e.value,S)?(i(),I("span",{key:0,innerHTML:m(e.value,S)},null,8,Ol)):(i(),I("span",Ml,$(s(g)("node.condition.conditionNodes.conditionTip")),1))]),S!==e.value.conditionNodes.length-2?(i(),I("div",{key:1,class:"sort-right",onClick:fe(Y=>_(S),["stop"])},[o(E)],8,Al)):j("",!0),s(a).type===2&&q.taskBatchStatus?(i(),U(w,{key:2},{trigger:t(()=>[r("div",{class:"error-tip text-24px",style:Se({color:s(Z)[q.taskBatchStatus].color})},[o(X,{icon:s(Z)[q.taskBatchStatus].icon},null,8,["icon"])],4)]),default:t(()=>[T(" "+$(s(Z)[q.taskBatchStatus].title),1)]),_:2},1024)):j("",!0)],10,Ul),o(ve,{modelValue:q.childNode,"onUpdate:modelValue":Y=>q.childNode=Y,disabled:h.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])])]),q.childNode?De(h.$slots,"default",{key:0,node:q},void 0,!0):j("",!0),S==0?(i(),I("div",ql)):j("",!0),S==0?(i(),I("div",Pl)):j("",!0),S==e.value.conditionNodes.length-1?(i(),I("div",Fl)):j("",!0),S==e.value.conditionNodes.length-1?(i(),I("div",Wl)):j("",!0),o(Sl,{open:y.value[S],"onUpdate:open":Y=>y.value[S]=Y,modelValue:e.value.conditionNodes[S],"onUpdate:modelValue":Y=>e.value.conditionNodes[S]=Y},null,8,["open","onUpdate:open","modelValue","onUpdate:modelValue"]),o(Ze,{id:M.value,show:x.value[S],"onUpdate:show":Y=>x.value[S]=Y,ids:L.value},{default:t(()=>[Hl,o(wo,{"model-value":e.value.conditionNodes[S]},null,8,["model-value"])]),_:2},1032,["id","show","onUpdate:show","ids"])]))),128))]),o(ve,{modelValue:e.value.childNode,"onUpdate:modelValue":C[0]||(C[0]=q=>e.value.childNode=q),disabled:h.disabled},null,8,["modelValue","disabled"])]),o(xl,{open:b.value,"onUpdate:open":C[1]||(C[1]=q=>b.value=q),modelValue:V.value,"onUpdate:modelValue":C[2]||(C[2]=q=>V.value=q),len:e.value.conditionNodes.length,"onUpdate:len":C[3]||(C[3]=q=>e.value.conditionNodes.length=q),onSave:D},null,8,["open","modelValue","len"])])}}}),Gl=me(Yl,[["__scopeId","data-v-bf759585"]]),Jl={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Xl=r("path",{fill:"currentColor",d:"M112 476h160v72H112zm320 0h160v72H432zm320 0h160v72H752z"},null,-1),Zl=[Xl];function Kl(l,k){return i(),I("svg",Jl,[...Zl])}const Ql={name:"ant-design-dash-outlined",render:Kl},ea={class:"w-460px flex-center"},oa=G({name:"CallbackDrawer",__name:"callback-drawer",props:{modelValue:{default:()=>({})},open:{type:Boolean,default:!1},len:{default:0}},emits:["update:open","save"],setup(l,{emit:k}){const f=l,B=k,a=N(!1),e=N({});F(()=>f.open,m=>{a.value=m},{immediate:!0}),F(()=>f.modelValue,m=>{e.value=m},{immediate:!0,deep:!0});const n=N(),p=()=>{B("update:open",!1),a.value=!1},c=()=>{var m;(m=n.value)==null||m.validate(d=>{d||(p(),B("save",e.value))}).catch(()=>{var d;return(d=window.$message)==null?void 0:d.warning("请检查表单信息")})},_={workflowNodeStatus:[{required:!0,message:"请选择工作流状态",trigger:"change"}],callback:{webhook:[{required:!0,message:"请输入 webhook",trigger:"change"}],contentType:[{required:!0,message:"请选择请求类型",trigger:"change",type:"number"}],secret:[{required:!0,message:"请输入秘钥",trigger:"change"}]}};return(m,d)=>{const b=He,y=Te,V=Ce,D=Be,v=je,x=Ie,M=Ue,L=ne,O=de,H=ue;return i(),U(H,{show:a.value,"onUpdate:show":d[5]||(d[5]=h=>a.value=h),"display-directive":"if",width:500,onAfterLeave:p},{default:t(()=>[o(O,null,{header:t(()=>[r("div",ea,[o(Oe,{modelValue:e.value.nodeName,"onUpdate:modelValue":d[0]||(d[0]=h=>e.value.nodeName=h),class:"mr-16px max-w-320px min-w-320px"},null,8,["modelValue"])])]),footer:t(()=>[o(L,{type:"primary",onClick:c},{default:t(()=>[T("保存")]),_:1}),o(L,{class:"ml-12px",onClick:p},{default:t(()=>[T("取消")]),_:1})]),default:t(()=>[o(M,{ref_key:"formRef",ref:n,model:e.value,rules:_,"label-align":"left","label-width":"100px"},{default:t(()=>[o(y,{path:"callback.webhook",label:"webhook"},{default:t(()=>[o(b,{value:e.value.callback.webhook,"onUpdate:value":d[1]||(d[1]=h=>e.value.callback.webhook=h),placeholder:"请输入 webhook"},null,8,["value"])]),_:1}),o(y,{path:"callback.contentType",label:"请求类型"},{default:t(()=>[o(V,{value:e.value.callback.contentType,"onUpdate:value":d[2]||(d[2]=h=>e.value.callback.contentType=h),options:s(at),placeholder:"请选择请求类型"},null,8,["value","options"])]),_:1}),o(y,{path:"callback.secret",label:"秘钥"},{default:t(()=>[o(b,{value:e.value.callback.secret,"onUpdate:value":d[3]||(d[3]=h=>e.value.callback.secret=h),placeholder:"请输入秘钥"},null,8,["value"])]),_:1}),o(y,{name:"workflowNodeStatus",label:"工作流状态",rules:[{required:!0,message:"请选择工作流状态",trigger:"change"}]},{default:t(()=>[o(x,{value:e.value.workflowNodeStatus,"onUpdate:value":d[4]||(d[4]=h=>e.value.workflowNodeStatus=h)},{default:t(()=>[o(v,null,{default:t(()=>[(i(!0),I(oe,null,se(s(Ye),(h,C)=>(i(),U(D,{key:C,label:s(g)(h.label),value:h.value},null,8,["label","value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])}}}),ta=G({name:"CallbackDetail",__name:"callback-detail",props:{modelValue:{default:()=>({})},open:{type:Boolean,default:!1}},emits:["update:open"],setup(l,{emit:k}){const f=l,B=k,a=N(!1);F(()=>f.open,n=>{a.value=n},{immediate:!0});const e=()=>{B("update:open",!1)};return(n,p)=>{const c=Ne,_=ye,m=de,d=ue;return i(),U(d,{show:a.value,"onUpdate:show":p[0]||(p[0]=b=>a.value=b),placement:"right",width:500,"display-directive":"if",onAfterLeave:e},{default:t(()=>[o(m,{title:"工作流详情"},{default:t(()=>[o(_,{column:1,"label-placement":"left",bordered:"","label-style":{width:"120px"}},{default:t(()=>[o(c,{label:"节点名称"},{default:t(()=>[T($(n.modelValue.nodeName),1)]),_:1}),o(c,{label:"webhook"},{default:t(()=>{var b;return[T($((b=n.modelValue.callback)==null?void 0:b.webhook),1)]}),_:1}),o(c,{label:"请求类型"},{default:t(()=>{var b;return[T($(s(Fe)[(b=n.modelValue.callback)==null?void 0:b.contentType]),1)]}),_:1}),o(c,{label:"密钥"},{default:t(()=>{var b;return[T($((b=n.modelValue.callback)==null?void 0:b.secret),1)]}),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),Ke=l=>($e("data-v-a344e8d8"),l=l(),xe(),l),na={class:"node-wrap"},la={class:"branch-box"},aa={class:"condition-node min-h-230px"},sa={class:"condition-node-box pt-0px"},ia={class:"popover"},da={class:"popover-item"},ua={class:"popover-item"},ra=["onClick"],ca={class:"title"},pa={class:"text text-#935af6"},ma={class:"content min-h-81px"},fa={key:0,class:"placeholder"},va={class:"flex justify-between"},_a=Ke(()=>r("span",{class:"content_label"},"Webhook:",-1)),ha={class:"content_label"},ba=Ke(()=>r("div",null,".........",-1)),ga={key:1,class:"top-left-cover-line"},Na={key:2,class:"bottom-left-cover-line"},ya={key:3,class:"top-right-cover-line"},wa={key:4,class:"bottom-right-cover-line"},ka=Ke(()=>r("div",{style:{margin:"20px 0","border-left":"#1366ff 5px solid","font-size":"medium","font-weight":"bold"}},[r("span",{style:{"padding-left":"18px"}},"回调节点详情")],-1)),$a=G({name:"CallbackNode",__name:"callback-node",props:{modelValue:{default:()=>({})},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:k}){const f=l,B=k,a=pe(),e=N({});F(()=>f.modelValue,L=>{e.value=L},{immediate:!0,deep:!0});const n=(L,O)=>{L.childNode?n(L.childNode,O):L.childNode=O},p=()=>{e.value.childNode&&(e.value.conditionNodes[0].childNode?n(e.value.conditionNodes[0].childNode,e.value.childNode):e.value.conditionNodes[0].childNode=e.value.childNode),ce(()=>{B("update:modelValue",e.value.conditionNodes[0].childNode)})},c=N(0),_=N(!1),m=N(!1),d=N({}),b=L=>{e.value.conditionNodes[c.value]=L,B("update:modelValue",e.value)},y=L=>{a.type===0?(c.value=L,d.value=JSON.parse(JSON.stringify(e.value.conditionNodes[L])),_.value=!0):m.value=!0},V=N(!1),D=N(""),v=N([]),x=(L,O)=>{var H;if(v.value=[],a.type===2){if((H=L.jobBatchList)==null||H.forEach(h=>{var C;h.id?(C=v.value)==null||C.push(h.id):h.jobId&&(D.value=h.jobId.toString())}),v.value.length===0){m.value=!0;return}V.value=!0}else a.type===1?m.value=!0:y(O)},M=L=>f.disabled?a.type===2?`node-error node-error-${L.taskBatchStatus?Z[L.taskBatchStatus].name:"default"}`:"node-error":"auto-judge-def auto-judge-hover";return(L,O)=>{const H=Xe,h=ne,C=po,R=Ql,P=ze,Q=Je,u=Ee,w=Re,z=ge,E=Ge,X=Ne,q=ye;return i(),I("div",na,[r("div",la,[(i(!0),I(oe,null,se(e.value.conditionNodes,(S,Y)=>(i(),I("div",{key:Y,class:"col-box"},[r("div",aa,[r("div",sa,[o(E,{disabled:s(a).type!==2||!0},{trigger:t(()=>{var re,_e;return[r("div",{class:Le(["auto-judge",M(S)]),onClick:Ve=>x(S,Y)},[r("div",ca,[r("span",pa,[o(P,{processing:"",dot:"",color:S.workflowNodeStatus===1?"#52c41a":"#ff4d4f"},null,8,["color"]),T("  "+$(S.nodeName),1)]),L.disabled?j("",!0):(i(),U(Q,{key:0,class:"close",onClick:fe(p,["stop"])}))]),r("div",ma,[(re=S.callback)!=null&&re.webhook?j("",!0):(i(),I("div",fa,$(s(g)("node.callback.conditionNodes.webhookTip")),1)),(_e=S.callback)!=null&&_e.webhook?(i(),I(oe,{key:1},[r("div",va,[_a,o(u,{class:"w-116px"},{default:t(()=>[T($(S.callback.webhook),1)]),_:2},1024)]),r("div",null,[r("span",ha,$(s(g)("node.callback.conditionNodes.contentType"))+":",1),T(" "+$(s(Fe)[S.callback.contentType]),1)]),ba],64)):j("",!0)]),s(a).type===2&&S.taskBatchStatus?(i(),U(z,{key:0},{trigger:t(()=>[r("div",{class:"error-tip text-24px",style:Se({color:s(Z)[S.taskBatchStatus].color})},[o(w,{icon:s(Z)[S.taskBatchStatus].icon},null,8,["icon"])],4)]),default:t(()=>[T(" "+$(s(Z)[S.taskBatchStatus].title),1)]),_:2},1024)):j("",!0)],10,ra)]}),default:t(()=>[r("div",ia,[o(h,{text:""},{default:t(()=>[r("span",da,[o(H,{class:"mb-3px text-24px font-bold"}),T(" "+$(s(g)("snail.retry")),1)])]),_:1}),o(C,{vertical:""}),o(h,{text:""},{default:t(()=>[r("span",ua,[o(R,{class:"mb-3px text-24px font-bold"}),r("span",null,$(s(g)("snail.ignore")),1)])]),_:1})])]),_:2},1032,["disabled"]),o(ve,{modelValue:S.childNode,"onUpdate:modelValue":re=>S.childNode=re,disabled:L.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])])]),S.childNode?De(L.$slots,"default",{key:0,node:S},void 0,!0):j("",!0),Y==0?(i(),I("div",ga)):j("",!0),Y==0?(i(),I("div",Na)):j("",!0),Y==e.value.conditionNodes.length-1?(i(),I("div",ya)):j("",!0),Y==e.value.conditionNodes.length-1?(i(),I("div",wa)):j("",!0)]))),128))]),e.value.conditionNodes.length>1?(i(),U(ve,{key:0,modelValue:e.value.childNode,"onUpdate:modelValue":O[0]||(O[0]=S=>e.value.childNode=S),disabled:L.disabled},null,8,["modelValue","disabled"])):j("",!0),s(a).type!==0?(i(),U(ta,{key:1,open:m.value,"onUpdate:open":O[1]||(O[1]=S=>m.value=S),modelValue:e.value.conditionNodes[0],"onUpdate:modelValue":O[2]||(O[2]=S=>e.value.conditionNodes[0]=S)},null,8,["open","modelValue"])):j("",!0),o(oa,{open:_.value,"onUpdate:open":O[3]||(O[3]=S=>_.value=S),modelValue:d.value,"onUpdate:modelValue":O[4]||(O[4]=S=>d.value=S),onSave:b},null,8,["open","modelValue"]),s(a).type!==0?(i(),U(Ze,{key:2,id:D.value,show:V.value,"onUpdate:show":O[5]||(O[5]=S=>V.value=S),ids:v.value},{default:t(()=>[ka,o(q,{column:1,bordered:"","label-style":{width:"120px"}},{default:t(()=>[o(X,{label:"节点名称"},{default:t(()=>[T($(e.value.conditionNodes[0].nodeName),1)]),_:1}),o(X,{label:"webhook"},{default:t(()=>{var S;return[T($((S=e.value.conditionNodes[0].callback)==null?void 0:S.webhook),1)]}),_:1}),o(X,{label:"请求类型"},{default:t(()=>{var S;return[T($(s(Fe)[(S=e.value.conditionNodes[0].callback)==null?void 0:S.contentType]),1)]}),_:1}),o(X,{label:"密钥"},{default:t(()=>{var S;return[T($((S=e.value.conditionNodes[0].callback)==null?void 0:S.secret),1)]}),_:1})]),_:1})]),_:1},8,["id","show","ids"])):j("",!0)])}}}),xa=me($a,[["__scopeId","data-v-a344e8d8"]]),Sa=G({name:"NodeWrap",__name:"node-wrap",props:{modelValue:{default:()=>({})},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:k}){const f=l,B=k,a=N({});return F(()=>f.modelValue,e=>{a.value=e},{immediate:!0,deep:!0}),F(()=>a.value,e=>{B("update:modelValue",e)}),(e,n)=>{const p=st("NodeWrap",!0);return i(),I(oe,null,[a.value.nodeType==1?(i(),U(_l,{key:0,modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=c=>a.value=c),disabled:e.disabled},{default:t(c=>[c.node?(i(),U(p,{key:0,modelValue:c.node.childNode,"onUpdate:modelValue":_=>c.node.childNode=_,disabled:e.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])):j("",!0)]),_:1},8,["modelValue","disabled"])):j("",!0),a.value.nodeType==2?(i(),U(Gl,{key:1,modelValue:a.value,"onUpdate:modelValue":n[1]||(n[1]=c=>a.value=c),disabled:e.disabled},{default:t(c=>[c.node?(i(),U(p,{key:0,modelValue:c.node.childNode,"onUpdate:modelValue":_=>c.node.childNode=_,disabled:e.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])):j("",!0)]),_:1},8,["modelValue","disabled"])):j("",!0),a.value.nodeType==3?(i(),U(xa,{key:2,modelValue:a.value,"onUpdate:modelValue":n[2]||(n[2]=c=>a.value=c),disabled:e.disabled},{default:t(c=>[c.node?(i(),U(p,{key:0,modelValue:c.node.childNode,"onUpdate:modelValue":_=>c.node.childNode=_,disabled:e.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])):j("",!0)]),_:1},8,["modelValue","disabled"])):j("",!0),a.value.childNode?(i(),U(p,{key:3,modelValue:a.value.childNode,"onUpdate:modelValue":n[3]||(n[3]=c=>a.value.childNode=c),disabled:e.disabled},null,8,["modelValue","disabled"])):j("",!0)],64)}}}),Va=G({name:"StartDetail",__name:"start-detail",props:{modelValue:{default:()=>({})},open:{type:Boolean,default:!1}},emits:["update:open"],setup(l,{emit:k}){const f=l,B=k,a=N(!1);F(()=>f.open,n=>{a.value=n},{immediate:!0});const e=()=>{B("update:open",!1)};return(n,p)=>{const c=Ne,_=ye,m=de,d=ue;return i(),U(d,{show:a.value,"onUpdate:show":p[0]||(p[0]=b=>a.value=b),placement:"right",width:500,"display-directive":"if",onAfterLeave:e},{default:t(()=>[o(m,{title:"工作流详情"},{default:t(()=>[o(_,{column:1,"label-placement":"left",bordered:"","label-style":{width:"120px"}},{default:t(()=>[o(c,{label:"工作流名称"},{default:t(()=>[T($(n.modelValue.workflowName),1)]),_:1}),o(c,{label:"组名称"},{default:t(()=>[T($(n.modelValue.groupName),1)]),_:1}),o(c,{label:"触发类型"},{default:t(()=>[T($(s(g)(s(it)[n.modelValue.triggerType])),1)]),_:1}),o(c,{label:"触发间隔"},{default:t(()=>[T($(n.modelValue.triggerInterval)+" "+$(n.modelValue.triggerType===2?"秒":null),1)]),_:1}),o(c,{label:"执行超时时间"},{default:t(()=>[T($(n.modelValue.executorTimeout)+" 秒",1)]),_:1}),o(c,{label:"阻塞策略"},{default:t(()=>[T($(s(g)(s(vo)[n.modelValue.blockStrategy])),1)]),_:1}),o(c,{label:"工作流状态"},{default:t(()=>[T($(s(g)(s(ro)[n.modelValue.workflowStatus])),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),Ca=G({name:"StartDrawer",__name:"start-drawer",props:{modelValue:{default:()=>({})},open:{type:Boolean,default:!1}},emits:["update:open","save"],setup(l,{emit:k}){const f=l,B=k,a=pe();let e="";const n=N(!1),p=N({}),c=N([]);F(()=>f.open,D=>{n.value=D},{immediate:!0}),F(()=>f.modelValue,D=>{p.value=D,D.triggerType===2&&(p.value.triggerInterval=Number(D.triggerInterval)),D.workflowName?e=D.workflowName:D.groupName?e=D.groupName:e="请选择组"},{immediate:!0,deep:!0});const _=N(),m=()=>{B("update:open",!1),n.value=!1},d=()=>{var D;(D=_.value)==null||D.validate(v=>{v||(m(),B("save",p.value))}).catch(()=>{var v;return(v=window.$message)==null?void 0:v.warning("请检查表单信息")})};(async()=>{const{data:D,error:v}=await ct();v||(c.value=D)})();const y=D=>{D===3?p.value.triggerInterval="* * * * * ?":D===2&&(p.value.triggerInterval=60)},V={groupName:{required:!0,message:"请选择组"},triggerType:{required:!0,message:"请选择触发类型"},triggerInterval:{required:!0,message:"请输入触发间隔"},executorTimeout:{required:!0,message:"请输入执行超时时间"},blockStrategy:{required:!0,message:"请选择阻塞策略"},workflowStatus:{required:!0,message:"请选择工作流状态"}};return(D,v)=>{const x=Ce,M=Te,L=vt,O=pt,H=_t,h=Be,C=je,R=Ie,P=He,Q=Ue,u=ne,w=de,z=ue;return i(),U(z,{show:n.value,"onUpdate:show":v[9]||(v[9]=E=>n.value=E),"display-directive":"if",width:610,onAfterLeave:m},{default:t(()=>[o(w,{title:s(e)},{header:t(()=>[o(Oe,{modelValue:p.value.workflowName,"onUpdate:modelValue":v[0]||(v[0]=E=>p.value.workflowName=E),class:"max-w-570px min-w-570px"},null,8,["modelValue"])]),footer:t(()=>[o(u,{type:"primary",onClick:d},{default:t(()=>[T("保存")]),_:1}),o(u,{class:"ml-12px",onClick:m},{default:t(()=>[T("取消")]),_:1})]),default:t(()=>[o(Q,{ref_key:"formRef",ref:_,model:p.value,rules:V,"label-align":"left","label-width":"100px"},{default:t(()=>[o(M,{path:"groupName",label:"组名称"},{default:t(()=>[o(x,{value:p.value.groupName,"onUpdate:value":v[1]||(v[1]=E=>p.value.groupName=E),placeholder:"请选择组",disabled:s(a).type===0&&s(ke)(s(a).id),options:c.value.map(E=>({label:E,value:E}))},null,8,["value","disabled","options"])]),_:1}),o(H,{cols:24,"x-gap":"20"},{default:t(()=>[o(L,{span:8},{default:t(()=>[o(M,{path:"triggerType",label:"触发类型"},{default:t(()=>[o(x,{value:p.value.triggerType,"onUpdate:value":[v[2]||(v[2]=E=>p.value.triggerType=E),y],placeholder:"请选择触发类型",options:s(dt).map(E=>({label:s(g)(E.label),value:E.value}))},null,8,["value","options"])]),_:1})]),_:1}),o(L,{span:16},{default:t(()=>[o(M,{path:"triggerInterval",label:"触发间隔"},{default:t(()=>[p.value.triggerType===3?(i(),U(s(ut),{key:0,modelValue:p.value.triggerInterval,"onUpdate:modelValue":v[3]||(v[3]=E=>p.value.triggerInterval=E),placeholder:"请输入Cron表达式"},null,8,["modelValue"])):(i(),U(O,{key:1,value:p.value.triggerInterval,"onUpdate:value":v[4]||(v[4]=E=>p.value.triggerInterval=E),class:"w-full",placeholder:"请输入触发间隔"},{suffix:t(()=>[T("秒")]),_:1},8,["value"]))]),_:1})]),_:1})]),_:1}),o(H,{cols:24,"x-gap":"20"},{default:t(()=>[o(L,{span:8},{default:t(()=>[o(M,{path:"executorTimeout",label:"执行超时时间"},{default:t(()=>[o(O,{value:p.value.executorTimeout,"onUpdate:value":v[5]||(v[5]=E=>p.value.executorTimeout=E),placeholder:"请输入超时时间"},{suffix:t(()=>[T("秒")]),_:1},8,["value"])]),_:1})]),_:1}),o(L,{span:16},{default:t(()=>[o(M,{path:"blockStrategy",label:"阻塞策略"},{default:t(()=>[o(R,{value:p.value.blockStrategy,"onUpdate:value":v[6]||(v[6]=E=>p.value.blockStrategy=E)},{default:t(()=>[o(C,null,{default:t(()=>[(i(!0),I(oe,null,se(s(rt),(E,X)=>(i(),U(h,{key:X,label:s(g)(E.label),value:E.value},null,8,["label","value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),o(M,{path:"workflowStatus",label:"节点状态"},{default:t(()=>[o(R,{value:p.value.workflowStatus,"onUpdate:value":v[7]||(v[7]=E=>p.value.workflowStatus=E)},{default:t(()=>[o(C,null,{default:t(()=>[(i(!0),I(oe,null,se(s(Ye),(E,X)=>(i(),U(h,{key:X,label:s(g)(E.label),value:E.value},null,8,["label","value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1}),o(M,{path:"description",label:"描述"},{default:t(()=>[o(P,{value:p.value.description,"onUpdate:value":v[8]||(v[8]=E=>p.value.description=E),type:"textarea",autosize:{minRows:5},placeholder:"请输入描述"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])]),_:1},8,["show"])}}}),Ta=l=>($e("data-v-b374b659"),l=l(),xe(),l),Ba={class:"node-wrap"},ja={class:"title"},Ia={class:"text"},Ua={class:"text-#ff943e"},Da={key:0,class:"content"},La={class:"content_label"},Ra={class:"content_label"},Ea=Ta(()=>r("div",null,".........",-1)),za={key:1,class:"content min-h-85px"},Oa={class:"placeholder"},Ma=G({name:"StartNode",__name:"start-node",props:{modelValue:{default:()=>({})},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:k}){const f=l,B=k,a=pe(),e=N({}),n=N({});F(()=>f.modelValue,d=>{n.value=d},{immediate:!0,deep:!0}),F(()=>n.value,d=>{B("update:modelValue",d)}),F(()=>{var d;return(d=n.value)==null?void 0:d.groupName},d=>{d&&a.setJobList(d)},{immediate:!0});const p=N(!1),c=N(!1),_=d=>{n.value=d},m=()=>{a.type===0?(e.value=JSON.parse(JSON.stringify(n.value)),p.value=!0):c.value=!0};return(d,b)=>{const y=ze,V=Ee,D=Re,v=ge;return i(),I("div",Ba,[r("div",{class:Le([`${d.disabled?"start-node-disabled":"node-wrap-box-hover"} ${s(a).type===2?"node-error-success":""}`,"node-wrap-box start-node"]),onClick:m},[r("div",ja,[r("span",Ia,[o(y,{dot:"",color:n.value.workflowStatus===1?"#52c41a":"#ff000d"},null,8,["color"]),r("span",Ua,"  "+$(n.value.workflowName?n.value.workflowName:s(g)("snail.form.groupName")),1)])]),n.value.groupName?(i(),I("div",Da,[r("div",null,[r("span",La,$(s(g)("snail.groupName"))+": ",1),o(V,{class:"max-w-132px"},{default:t(()=>[T($(n.value.groupName),1)]),_:1})]),r("div",null,[r("span",Ra,$(s(g)("snail.blockStrategy"))+": ",1),T(" "+$(s(g)(s(vo)[n.value.blockStrategy])),1)]),Ea])):(i(),I("div",za,[r("span",Oa,$(s(g)("snail.form.workflowTip")),1)])),s(a).type===2?(i(),U(v,{key:2},{trigger:t(()=>[r("div",{class:"error-tip text-24px",style:Se({color:s(Z)[3].color})},[o(D,{icon:s(Z)[3].icon},null,8,["icon"])],4)]),default:t(()=>[T(" "+$(s(Z)[3].title),1)]),_:1})):j("",!0)],2),o(ve,{modelValue:n.value.nodeConfig,"onUpdate:modelValue":b[0]||(b[0]=x=>n.value.nodeConfig=x),disabled:d.disabled},null,8,["modelValue","disabled"]),s(a).type!==0?(i(),U(Va,{key:0,open:c.value,"onUpdate:open":b[1]||(b[1]=x=>c.value=x),modelValue:n.value,"onUpdate:modelValue":b[2]||(b[2]=x=>n.value=x)},null,8,["open","modelValue"])):j("",!0),o(Ca,{open:p.value,"onUpdate:open":b[3]||(b[3]=x=>p.value=x),modelValue:e.value,"onUpdate:modelValue":b[4]||(b[4]=x=>e.value=x),onSave:_},null,8,["open","modelValue"])])}}}),Aa=me(Ma,[["__scopeId","data-v-b374b659"]]),qa={class:"workflow"},Pa={class:"workflow-affix"},Fa={class:"header"},Wa={class:"ml-8px mr-8px text-18px text-#333639 dark:text-#d6d6d6"},Ha={key:0,class:"buttons"},Ya={class:"workflow-body"},Ga={class:"box-scale"},Ja={class:"end-node"},Xa=r("div",{class:"end-node-circle"},null,-1),Za={class:"end-node-text"},ts=G({name:"SnailWorkflow",__name:"workflow",props:{modelValue:{default:()=>({})},spinning:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","save","cancel"],setup(l,{emit:k}){const f=l,B=k,a=N(100),e=N({}),n=async()=>{B("save")},p=()=>{B("cancel")};F(()=>f.modelValue,_=>{e.value=_},{immediate:!0,deep:!0}),F(()=>e.value,_=>{B("update:modelValue",_)});const c=_=>{a.value+=10*_,a.value<=10?a.value=10:a.value>=300&&(a.value=300)};return(_,m)=>{const d=Ot,b=ne,y=ge,V=go,D=wt,v=co;return i(),I("div",qa,[r("div",Pa,[o(D,{"trigger-top":0},{default:t(()=>[r("div",Fa,[r("div",null,[o(y,null,{trigger:t(()=>[o(b,{type:"info",size:"small",strong:"",onClick:m[0]||(m[0]=x=>c(-1))},{default:t(()=>[o(d)]),_:1})]),default:t(()=>[T(" 缩小 ")]),_:1}),r("span",Wa,$(a.value)+"%",1),o(y,null,{trigger:t(()=>[o(b,{type:"info",size:"small",strong:"",onClick:m[1]||(m[1]=x=>c(1))},{default:t(()=>[o(V)]),_:1})]),default:t(()=>[T(" 放大 ")]),_:1})]),_.disabled?j("",!0):(i(),I("div",Ha,[o(b,{type:"info",onClick:n},{default:t(()=>[T("保存")]),_:1}),o(b,{class:"ml-16px",onClick:p},{default:t(()=>[T("取消")]),_:1})]))])]),_:1}),r("div",Ya,[o(v,{show:_.spinning},{default:t(()=>[r("div",{class:"workflow-design",style:Se(`transform: scale(${a.value/100})`)},[r("div",Ga,[o(Aa,{modelValue:e.value,"onUpdate:modelValue":m[2]||(m[2]=x=>e.value=x),disabled:_.disabled},null,8,["modelValue","disabled"]),e.value.nodeConfig?(i(),U(Sa,{key:0,modelValue:e.value.nodeConfig,"onUpdate:modelValue":m[3]||(m[3]=x=>e.value.nodeConfig=x),disabled:_.disabled},null,8,["modelValue","disabled"])):j("",!0),r("div",Ja,[Xa,r("div",Za,$(s(g)("node.endNode")),1)])])],4)]),_:1},8,["show"])])])])}}});export{ts as _};
